{"ast":null,"code":"import { __assign } from \"tslib\";\n\nfunction ItoI(a) {\n  return a;\n}\n\nfunction innerCreateMedium(defaults, middleware) {\n  if (middleware === void 0) {\n    middleware = ItoI;\n  }\n\n  var buffer = [];\n  var assigned = false;\n  var medium = {\n    read: function () {\n      if (assigned) {\n        throw new Error('Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.');\n      }\n\n      if (buffer.length) {\n        return buffer[buffer.length - 1];\n      }\n\n      return defaults;\n    },\n    useMedium: function (data) {\n      var item = middleware(data, assigned);\n      buffer.push(item);\n      return function () {\n        buffer = buffer.filter(function (x) {\n          return x !== item;\n        });\n      };\n    },\n    assignSyncMedium: function (cb) {\n      assigned = true;\n\n      while (buffer.length) {\n        var cbs = buffer;\n        buffer = [];\n        cbs.forEach(cb);\n      }\n\n      buffer = {\n        push: function (x) {\n          return cb(x);\n        },\n        filter: function () {\n          return buffer;\n        }\n      };\n    },\n    assignMedium: function (cb) {\n      assigned = true;\n      var pendingQueue = [];\n\n      if (buffer.length) {\n        var cbs = buffer;\n        buffer = [];\n        cbs.forEach(cb);\n        pendingQueue = buffer;\n      }\n\n      var executeQueue = function () {\n        var cbs = pendingQueue;\n        pendingQueue = [];\n        cbs.forEach(cb);\n      };\n\n      var cycle = function () {\n        return Promise.resolve().then(executeQueue);\n      };\n\n      cycle();\n      buffer = {\n        push: function (x) {\n          pendingQueue.push(x);\n          cycle();\n        },\n        filter: function (filter) {\n          pendingQueue = pendingQueue.filter(filter);\n          return buffer;\n        }\n      };\n    }\n  };\n  return medium;\n}\n\nexport function createMedium(defaults, middleware) {\n  if (middleware === void 0) {\n    middleware = ItoI;\n  }\n\n  return innerCreateMedium(defaults, middleware);\n} // eslint-disable-next-line @typescript-eslint/ban-types\n\nexport function createSidecarMedium(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var medium = innerCreateMedium(null);\n  medium.options = __assign({\n    async: true,\n    ssr: false\n  }, options);\n  return medium;\n}","map":{"version":3,"names":["__assign","ItoI","a","innerCreateMedium","defaults","middleware","buffer","assigned","medium","read","Error","length","useMedium","data","item","push","filter","x","assignSyncMedium","cb","cbs","forEach","assignMedium","pendingQueue","executeQueue","cycle","Promise","resolve","then","createMedium","createSidecarMedium","options","async","ssr"],"sources":["C:/JZ/code/Hack-the-North/frontend/node_modules/use-sidecar/dist/es2015/medium.js"],"sourcesContent":["import { __assign } from \"tslib\";\r\nfunction ItoI(a) {\r\n    return a;\r\n}\r\nfunction innerCreateMedium(defaults, middleware) {\r\n    if (middleware === void 0) { middleware = ItoI; }\r\n    var buffer = [];\r\n    var assigned = false;\r\n    var medium = {\r\n        read: function () {\r\n            if (assigned) {\r\n                throw new Error('Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.');\r\n            }\r\n            if (buffer.length) {\r\n                return buffer[buffer.length - 1];\r\n            }\r\n            return defaults;\r\n        },\r\n        useMedium: function (data) {\r\n            var item = middleware(data, assigned);\r\n            buffer.push(item);\r\n            return function () {\r\n                buffer = buffer.filter(function (x) { return x !== item; });\r\n            };\r\n        },\r\n        assignSyncMedium: function (cb) {\r\n            assigned = true;\r\n            while (buffer.length) {\r\n                var cbs = buffer;\r\n                buffer = [];\r\n                cbs.forEach(cb);\r\n            }\r\n            buffer = {\r\n                push: function (x) { return cb(x); },\r\n                filter: function () { return buffer; },\r\n            };\r\n        },\r\n        assignMedium: function (cb) {\r\n            assigned = true;\r\n            var pendingQueue = [];\r\n            if (buffer.length) {\r\n                var cbs = buffer;\r\n                buffer = [];\r\n                cbs.forEach(cb);\r\n                pendingQueue = buffer;\r\n            }\r\n            var executeQueue = function () {\r\n                var cbs = pendingQueue;\r\n                pendingQueue = [];\r\n                cbs.forEach(cb);\r\n            };\r\n            var cycle = function () { return Promise.resolve().then(executeQueue); };\r\n            cycle();\r\n            buffer = {\r\n                push: function (x) {\r\n                    pendingQueue.push(x);\r\n                    cycle();\r\n                },\r\n                filter: function (filter) {\r\n                    pendingQueue = pendingQueue.filter(filter);\r\n                    return buffer;\r\n                },\r\n            };\r\n        },\r\n    };\r\n    return medium;\r\n}\r\nexport function createMedium(defaults, middleware) {\r\n    if (middleware === void 0) { middleware = ItoI; }\r\n    return innerCreateMedium(defaults, middleware);\r\n}\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport function createSidecarMedium(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var medium = innerCreateMedium(null);\r\n    medium.options = __assign({ async: true, ssr: false }, options);\r\n    return medium;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}